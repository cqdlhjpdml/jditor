{"code":"!function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=4)}({4:function(module,exports,__webpack_require__){\"use strict\";function Connector(e){return Connector.prototype.initialize.apply(this,null),this.elementType=\"Connector\",this.height=10,this.width=10,this.fillColor=\"125,125,125\",this.alpha=1,this.owner=e,this.owner_id=e._id,this.setPopmenu(Node_PopMenu),this.serializedProperties.push(\"owner_id\"),this}function CrossDot(){return CrossDot.prototype.initialize.apply(this,null),this.paint=function(e){e.save(),e.strokeStyle=\"pink\",e.lineWidth=.5,e.beginPath(),e.moveTo(this.cx,this.cy+500),e.lineTo(this.cx,this.cy-500),e.moveTo(this.cx+500,this.cy),e.lineTo(this.cx-500,this.cy),e.closePath(),e.stroke(),e.restore()},this}function FreeLink(e,t,o){FreeLink.prototype.initialize.apply(this,arguments),this.initialize=function(e,t,o){this.showAZ=!0,this.elementType=\"FreeLink\",this.nodeA_id=e._id,this.nodeZ_id=t._id,this.text=o,this.setPopmenu(Node_PopMenu),this.serializedProperties.push(\"nodeA_id\"),this.serializedProperties.push(\"nodeZ_id\")},this.setPreLink=function(e){this.preLink=e},this.setFollowLink=function(e){this.followLink=e},this.setCenterLocation=function(e,t){var o=e-this.cx,i=t-this.cy,n=this.nodeA,r=this.nodeZ;n.setCenterLocation(n.cx+o,n.cy+i),r.setCenterLocation(r.cx+o,r.cy+i)},this.clickHandler=function(e){0==this.showAZ?(this.nodeA.visible=!0,this.nodeZ.visible=!0):(this.nodeA.visible=!1,this.nodeZ.visible=!1),this.showAZ=!this.showAZ,this.dispatchEvent(\"click\",e)},this.removeFromScene=function(e){let t=this.preLink,o=this.followLink;for(e.remove(this);t;){let o=t.preLink;e.remove(t),t=o}for(;o;){let t=o.followLink;e.remove(o),o=t}},this.initialize(e,t,o)}Connector.prototype=new JTopo.Node,JTopo.Connector=Connector,CrossDot.prototype=new JTopo.DisplayElement,JTopo.CrossDot=CrossDot,FreeLink.prototype=new JTopo.Link,JTopo.FreeLink=FreeLink,JTopo.loadFromJson=function(jsonStr,canvas,stage){if(eval(\"var jsonObj = \"+jsonStr),stage)stage.clear();else var stage=new JTopo.Stage(canvas);for(var k in jsonObj)\"childs\"!=k&&(stage[k]=jsonObj[k]);var scenes=jsonObj.childs;return scenes.forEach((function(e){var t=new JTopo.Scene(stage);for(var o in e)\"childs\"!=o&&(t[o]=e[o]),\"background\"==o&&(t.background=e[o]);e.childs.forEach((function(e){var o,i=e.elementType;(o=JTopo.createNode(i,e,t))&&t.add(o)}))})),stage},JTopo.Nodes_Tables={},JTopo.createNode=function(e,t){var o={};function i(e,t){for(var o in t)e[o]=t[o]}return o.node=function(){var e=new JTopo.Node;i(e,t);var o=e._id;return JTopo.Nodes_Tables[o]=e,e},o.CircleNode=function(){var e=new JTopo.CircleNode;i(e,t);var o=e._id;return JTopo.Nodes_Tables[o]=e,nodes[o]},o.TextNode=function(){var e=new JTopo.TextBox;i(e,t);var o=e._id;return JTopo.Nodes_Tables[o]=e,e},o.SvgNode=function(){var e=t.selector,o=t.text,n=new JTopo.SvgNode(e,o);i(n,t);var r=n._id;return JTopo.Nodes_Tables[r]=n,n},o.Connector=function(){var e=JTopo.Nodes_Tables[t.owner_id],o=new JTopo.Connector(e);e.connectors.push(o),i(o,t);var n=o._id;return JTopo.Nodes_Tables[n]=o,o},o.FreeLink=function(){var e=JTopo.Nodes_Tables[t.nodeA_id],o=JTopo.Nodes_Tables[t.nodeZ_id],n=JTopo.Nodes_Tables[t.text],r=new JTopo.FreeLink(e,o,n);i(r,t);var s=r._id;return JTopo.Nodes_Tables[s]=r,r},o[e]?o[e]():null},JTopo.Element.initialize=function(){this.elementType=\"element\",this.serializedProperties=[\"elementType\",\"_id\"],this.propertiesStack=[];let e=(new Date).getTime();for(;e==(new Date).getTime(););this._id=\"\"+(new Date).getTime()},JTopo.TextBox=function(e){JTopo.TextBox.prototype.initialize.apply(this,null),this.elementType=\"TextNode\";var t=this;return this.dbclick((function(e){PropPanelFactory.getPropPanelInstance(\"属性设置\",t).show()})),this.text=e,this.paint=this.paint=function(e){e.save(),e.font=this.font;var t=this.width,o=this.height;this.width=e.measureText(this.text).width,this.height=e.measureText(\"田\").width;var i=(this.width-t)/2,n=(this.height-o)/2;e.translate(i,n),e.beginPath(),e.font=this.font,e.strokeStyle=\"rgba(\"+this.fontColor+\", \"+this.alpha+\")\",e.fillStyle=\"rgba(\"+this.fontColor+\", \"+this.alpha+\")\",e.fillText(this.text,-this.width/2,this.height/2),e.closePath(),e.restore(),this.paintBorder(e),this.paintCtrl(e),this.paintAlarmText(e)},this.setPopmenu(Node_PopMenu),this},JTopo.TextBox.prototype=new JTopo.TextNode,JTopo.Scene.prototype.setTool=function(e){this.tool=e},JTopo.Scene.prototype.getTool=function(){return this.tool},JTopo.Scene.prototype.setEditor=function(e){this.editor=e},JTopo.Scene.prototype.getEditor=function(){return this.editor}}});","extractedComments":[]}